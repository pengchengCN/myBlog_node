<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>登录</title>
</head>
<body>
  <div>
    账号<input id="username" type="text" />
    密码<input id="password" type="password" />
    <input id="button" type="button" value="button" />
  </div>
  <div style="margin-top: 20px">
    账号<input id="newUsername" type="text" />
    密码<input id="newUpassword" type="password" value="123456" />
    确认密码<input id="newUpassword2" type="password" value="123456" />
    电话<input id="phone" type="text" value="13500002222" />
    <input id="register" type="button" value="注册" />
  </div>
  <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.js"></script>
  <script>
    $(()=>{
      console.log(window.location.hostname)
      // 登录
      $("#button").click(function(){
        let username = $('#username').val()
        let password = $('#password').val()
        $.ajax({
          type:"POST",
          url:window.location.href,
          dataType:"JSON",
          data:{name:username,pass:password},
          success:function(data){
            if (data.code === '200') return window.location.href = window.location.href + "home.html"
            alert(data.data)
          }
        });
      })
      // 注册
      $("#register").click(function(){
        let username = $('#newUsername').val()
        let password = $('#newUpassword').val()
        let password2 = $('#newUpassword2').val()
        let phone = $('#phone').val()
        if (username === '') return alert('账号不能为空！')
        if (password !== password2) return alert('密码不一致！')
        $.ajax({
          type:"POST",
          url:window.location.href + 'register',
          dataType:"JSON",
          data:{name:username,pass:password,phone: phone},
          success:function(data){
            alert(data.data)
          }
        });
      })
    })
  </script>
</body>

</html>